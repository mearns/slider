<!DOCTYPE html >
<html>
    <head>
        <meta charset='utf-8' />

        <title>OOP Test</title>

    </head>
    <body>

        <script type='text/javascript' src='/res/script/class.js' ></script>

        <script type='text/javascript'>
        // <![CDATA[

            var Animal = Thing.subclass("Animal", {

                speach: function() {
                    return "Animal sound.";
                },

                speak: function() {
                    console.log(this.speach());
                },

                getClassName: function() {
                    return "Animal: " + this.super();
                }
            });

            var GenericAnimal = Animal.subclass("GenericAnimal", {
                speach: function() {
                    return "Generic " + this.super();
                }
            });

            var SpecificAnimal = GenericAnimal.subclass("SpecificAnimal", {
                speach: function() {
                    return "Non-" + this.super();
                }
            });

            var Dog = SpecificAnimal.subclass("Dog", {
                speach: function() {
                    return "W00f!";
                },

                //FIXME: XXX: getClassName does not exist in parent class!
                getClassName: function() {
                    return "Dog's class: " + this.super();
                }
            });


            var a = Animal.create();
            var g = GenericAnimal.create();
            var s = SpecificAnimal.create();
            var d = Dog.create();
            
            console.log(a.speach());
            console.log(g.speach());
            console.log(s.speach());
            console.log(d.speach());

            console.log("-----------------------------------------------");

            a.speak();
            g.speak();
            s.speak();
            d.speak();

            console.log("-----------------------------------------------");

            //This should not be "Animal: Animal: Animal: SpecificAnimal".
            // It should just be "Animal: SpecificAnimal".
            console.log(s.getClassName());
            console.log(d.getClassName());
        
        // ]]>
        </script>
    </body>
</html>

